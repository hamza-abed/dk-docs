---
title: Inscription
description: Crée un nouveau compte utilisateur et une organisation.
---

import { Aside } from '@astrojs/starlight/components';

## POST /auth/register

Crée un nouveau compte utilisateur. Une organisation est automatiquement créée lors de l'inscription et l'utilisateur en devient l'administrateur.

### Body

| Paramètre | Type | Requis | Description |
|-----------|------|--------|-------------|
| `email` | string | Oui | Adresse email de l'utilisateur. Doit être unique sur la plateforme. |
| `password` | string | Oui | Mot de passe. Minimum 8 caractères. |
| `first_name` | string | Oui | Prénom de l'utilisateur. |
| `last_name` | string | Oui | Nom de famille de l'utilisateur. |

<Aside type="note">
  Le champ `organization_name` n'est **pas** supporté par le backend. L'organisation est créée automatiquement avec un nom par défaut. Pour renommer l'organisation, utilisez l'endpoint `PUT /organizations/{id}` après l'inscription.
</Aside>

### Exemple de requête

```bash
curl -X POST https://api.dispatchkit.io/api/v1/auth/register \
  -H "Content-Type: application/json" \
  -d '{
    "email": "marie@transport-dupont.fr",
    "password": "MotDePasse2024!",
    "first_name": "Marie",
    "last_name": "Dupont"
  }'
```

### Réponse `201 Created`

| Champ | Type | Description |
|-------|------|-------------|
| `access_token` | string | Token JWT pour authentifier les prochaines requêtes. |
| `refresh_token` | string | Token de renouvellement. |
| `expires_in` | integer | Durée de validité du `access_token` en secondes. |
| `user` | object | Informations de l'utilisateur créé. |
| `user.id` | string (UUID) | Identifiant unique de l'utilisateur. |
| `user.email` | string | Adresse email. |
| `user.first_name` | string | Prénom. |
| `user.last_name` | string | Nom de famille. |
| `user.organization_id` | string (UUID) | ID de l'organisation créée. |
| `user.role` | string | Rôle dans l'organisation : `admin`. |
| `operator` | object | Profil opérateur associé à l'utilisateur (optionnel). |
| `operator.id` | string (UUID) | Identifiant de l'opérateur. |
| `operator.first_name` | string | Prénom de l'opérateur. |
| `operator.last_name` | string | Nom de famille. |
| `operator.phone` | string | Numéro de téléphone. |
| `operator.status` | string | Statut de disponibilité (`available`, etc.). |
| `operator.organization_id` | string (UUID) | ID de l'organisation. |
| `organizations` | array | Liste des organisations de l'utilisateur. |

```json
{
  "access_token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...",
  "refresh_token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...",
  "expires_in": 3600,
  "user": {
    "id": "a1b2c3d4-e5f6-7890-abcd-ef1234567890",
    "email": "marie@transport-dupont.fr",
    "first_name": "Marie",
    "last_name": "Dupont",
    "organization_id": "b2c3d4e5-f6a7-8901-bcde-f12345678901",
    "role": "admin"
  },
  "operator": {
    "id": "c3d4e5f6-a7b8-9012-cdef-123456789012",
    "first_name": "Marie",
    "last_name": "Dupont",
    "phone": "",
    "status": "available",
    "organization_id": "b2c3d4e5-f6a7-8901-bcde-f12345678901"
  }
}
```

### Erreurs

| Code HTTP | Description |
|-----------|-------------|
| `400` | Données invalides (email manquant, mot de passe trop court, etc.) |
| `409` | Email déjà utilisé |

---
title: Gestion des clients
description: Créez et gérez vos clients, et offrez-leur un accès au portail de suivi de leurs missions.
---

## Gestion des clients

Les clients sont les destinataires des missions dans DispatchKit. Ils peuvent être des entreprises ou des particuliers. Chaque mission est rattachée à un client, ce qui permet le suivi et la facturation.

## Créer un client

<Tabs>
  <Tab title="Dashboard">
    Allez dans **Clients → Nouveau client** et renseignez :

    - **Nom** : raison sociale ou nom complet
    - **Email** : pour les notifications et l'accès portail
    - **Téléphone** : optionnel, pour les notifications SMS
    - **Adresse** : adresse principale (peut être pré-remplie à la création de mission)
    - **Référence** : code interne optionnel pour la synchronisation avec votre CRM
  </Tab>
  <Tab title="API">
    ```bash
    curl -X POST https://api.dispatchkit.io/api/v1/clients \
      -H "Authorization: Bearer {token}" \
      -H "Content-Type: application/json" \
      -d '{
        "name": "Entreprise Martin SA",
        "email": "contact@martin-sa.fr",
        "phone": "+33145678900",
        "address": "15 Avenue des Champs-Élysées, 75008 Paris",
        "reference": "CLIENT-0042"
      }'
    ```
  </Tab>
</Tabs>

## Portail client

Le portail client est un espace en lecture seule accessible à vos clients pour suivre l'avancement de leurs missions.

### Activer l'accès portail

Depuis la fiche client, cliquez sur **Activer l'accès portail**. Le client reçoit un email avec ses identifiants de connexion sur le portail `portal.dispatchkit.io`.

### Ce que voit le client

Sur le portail, le client peut consulter :

- **Liste de ses missions** en cours et passées
- **Statut en temps réel** de chaque mission
- **Position de l'opérateur** sur une carte (uniquement en `IN_PROGRESS`)
- **Heure d'arrivée estimée** calculée selon la distance et le trafic
- **Reçus de complétion** : horodatage, notes, photos, signature

<Info>
  Le portail client est en lecture seule. Le client ne peut pas créer, modifier ou annuler des missions depuis le portail. Ces actions restent réservées à votre organisation.
</Info>

## Notifications clients

Configurez les notifications automatiques envoyées à vos clients selon les événements :

| Événement | Email | SMS |
|-----------|-------|-----|
| Mission créée | Optionnel | Non |
| Opérateur en route | Optionnel | Optionnel |
| Opérateur sur place | Optionnel | Optionnel |
| Mission terminée | Toujours | Optionnel |

Les templates de notifications sont personnalisables depuis **Paramètres → Notifications**.

## Missions d'un client

Pour voir toutes les missions d'un client spécifique :

```bash
curl "https://api.dispatchkit.io/api/v1/missions?client_id=cli_01J5X...&status=COMPLETED" \
  -H "Authorization: Bearer {token}"
```

## Modifier et archiver un client

<Warning>
  L'archivage d'un client ne supprime pas ses missions existantes. Elles restent accessibles dans l'historique mais aucune nouvelle mission ne peut être créée pour un client archivé.
</Warning>

```bash
# Modifier un client
curl -X PUT https://api.dispatchkit.io/api/v1/clients/{id} \
  -H "Authorization: Bearer {token}" \
  -H "Content-Type: application/json" \
  -d '{
    "name": "Entreprise Martin & Fils SA",
    "phone": "+33145678901"
  }'
```
